import{o as e,c as t,a,b as r,r as s,t as n,d as l,i as o,e as i,f as c,g as u,F as d,h as p,w as m,p as k,j as f,k as h,l as x,m as b,n as g,q as w,v,s as y,T as L,u as V,x as U,y as S,z as D,A as C,B as $,C as T}from"./vendor.cbd2cfc5.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const r=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const l=new URL(e,r);if(self[t].moduleMap[l])return a(self[t].moduleMap[l]);const o=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){n(new Error(`Failed to import: ${e}`)),s(i)},onload(){a(self[t].moduleMap[l]),s(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/hexschool-bootstrap5-21-search/assets/");const _="hexschool-bootstrap5-21",E={week1:"主線一",week2:"主線二",week3:"最終"},I=[{value:"filterDone",label:"我有寫作業了 😁"},{value:"none",label:"你才沒寫作業 😭"}];const j={set(e,t){let a=window.localStorage.getItem(_);a=a?JSON.parse(a):{},a[e]=t,window.localStorage.setItem(_,JSON.stringify(a))},get(e,t){let a=window.localStorage.getItem(_);if(!a)return t;a=JSON.parse(a);return a[e]?a[e]:t}};const B={name:"TheHeader"},N={class:"\n    py-2 sm:py-5 text-base sm:text-2xl md:text-3xl\n    bg-white dark:bg-dark-800 shadow"},M=a("div",{class:"container px-2 sm:px-4"},[a("a",{href:"https://forms.gle/cbYW3oH7WYsX7n3WA",target:"_blank",rel:"noreferrer noopener",title:"報名了？該交作業囉！"},[a("h1",{class:"font-bold text-center"}," 21 天 Bootstrap 5 實戰營 - 誰沒寫作業 ")])],-1);B.render=function(a,r,s,n,l,o){return e(),t("header",N,[M])};const W={name:"TheFooter"},F={class:"py-2 sm:py-4 bg-primary-800 dark:bg-dark-900 text-white"},H=a("div",{class:"container "},[a("p",{class:"text-center"},[a("a",{class:"hover:text-gray-200",href:"https://chupai.github.io/",target:"_blank",rel:"noreferrer noopener",title:"竹白記事本"}," 竹白記事本 "),r(" - "),a("a",{class:"hover:text-gray-200",href:"https://github.com/chupai/hexschool-bootstrap5-21-search",target:"_blank",rel:"noreferrer noopener",title:"GitHub 倉庫"}," source code ")])],-1);W.render=function(a,r,s,n,l,o){return e(),t("footer",F,[H])};const q={name:"UserList"},z={class:"\n      grid gap-4 items-start\n      grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3"};q.render=function(a,r,n,l,o,i){return e(),t("ul",z,[s(a.$slots,"default")])};const K={name:"UserItemLink",props:{url:{type:String,default:""}}};K.render=function(a,r,n,l,o,i){return e(),t("a",{class:["\n      block p-1 select-none text-xs xs:text-base text-primary-600 hover:text-primary-400\n      dark:text-primary-200 dark:hover:text-primary-100\n    ",[n.url?"text-primary-600 dark:text-primary-200":"text-primary-200 dark:text-primary-800"]],target:"_blank",rel:"noreferrer noopener",href:n.url},[s(a.$slots,"default")],10,["href"])};const O={name:"UserItemLike",components:{},props:{value:{type:Boolean}},emits:["update:value"]},A=a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"\n        M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969\n        0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755\n        1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176\n        0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1\n        1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1\n        1 0 00.951-.69l1.519-4.674z"},null,-1);O.render=function(a,r,s,n,l,o){return e(),t("div",{class:"cursor-pointer p-2 rounded-full hover:text-primary-200",title:"追蹤我",onClick:r[1]||(r[1]=e=>a.$emit("update:value",!s.value))},[(e(),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:["w-6 h-6",{"fill-current text-primary-500 dark:text-primary-50":s.value}],fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[A],2))])};const P={name:"UserItem",components:{UserItemLink:K,UserItemLike:O},props:{user:{type:Object,required:!0}},setup(e){const t=n(e,"user"),a=l((()=>0===t.value.doneCount)),r=o("statisticalData"),s=l((()=>{if(a.value)return"同學，報名有紀錄der！該寫作業囉！";let e=r.allCount;for(let a=5;a>=t.value.rank;a-=1)e-=a>=3?r.week3List[a-3]:r.doneList[a];return`你已贏過 ${(100*(e/(r.allCount-1))).toFixed(2)}% 的人`}));return{WEEK_COUNT:3,WEEK_LIST:E,isNone:a,rankMessage:s,updateLiked:e=>{t.value.isLiked=e;const{id:a}=t.value;let r=j.get("likeList",[]);r=r.filter((e=>e!==a)),e&&r.push(a),j.set("likeList",r)}}}},R={class:"flex justify-between items-center"},J={key:0,class:" text-sm text-gray-400 select-none"},Y={key:1,class:" text-sm text-gray-400 select-none"},G={key:2,class:"mt-2 grid grid-cols-3 gap-1"},X={class:"font-bold"};P.render=function(s,n,l,o,k,f){const h=i("user-item-like"),x=i("user-item-link");return e(),t("li",{class:["\n     px-4 py-4 rounded-md shadow bg-white dark:bg-dark-800\n    ",[l.user.isLiked?"opacity-100":"opacity-95"]]},[a("div",null,[a("div",R,[a("h2",{class:"tooltip text-xl md:text-2xl font-bold leading-none flex items-center","data-tooltip":o.rankMessage},[o.isNone?u("",!0):(e(),t("span",{key:0,class:["px-4 mr-2 rounded-full select-none text-base font-normal text-white",{"bg-primary-300 dark:bg-primary-300":1===l.user.rank,"bg-primary-400 dark:bg-primary-400":2===l.user.rank,"bg-primary-500 dark:bg-primary-500":3===l.user.rank,"bg-primary-600 dark:bg-primary-600":4===l.user.rank,"bg-primary-700 dark:bg-primary-700":5===l.user.rank}]},c(5!==l.user.rank?`進度：${l.user.rank}`:"恭喜完成"),3)),r(" "+c(l.user.name),1)],8,["data-tooltip"]),a(h,{value:l.user.isLiked,"onUpdate:value":o.updateLiked},null,8,["value","onUpdate:value"])]),o.isNone?(e(),t("p",J," 📅 報名時間："+c(l.user.timestamp),1)):u("",!0),o.isNone?u("",!0):(e(),t("p",Y," 📅 更新時間："+c(l.user.timestamp),1)),o.isNone?u("",!0):(e(),t("ul",G,[(e(!0),t(d,null,p(o.WEEK_LIST,((s,n)=>(e(),t("li",{key:n},[a(x,{url:l.user[`${n}Url`],class:{"pointer-events-none":!l.user[`${n}Url`]}},{default:m((()=>[a("span",X,c(s),1),r("："+c(l.user[`${n}Url`]?l.user[n]:""),1)])),_:2},1032,["url","class"])])))),128))]))])],2)};const Q={name:"UserTabs",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup:()=>({TAB_LIST:I})},Z=h();k("data-v-6eed1ab2");const ee={class:"flex justify-between space-x-4 mb-5"};f();const te=Z(((r,s,n,l,o,i)=>(e(),t("nav",null,[a("ul",ee,[(e(!0),t(d,null,p(l.TAB_LIST,(a=>(e(),t("li",{key:a.value,class:["flex-grow p-2 md:p-5 cursor-pointer rounded-xl\n          text-base sm:text-2l md:text-3xl font-bold text-center text-white text-opacity-80\n          hover:bg-primary-700 dark:hover:bg-dark-800\n        ",{"is-active":n.modelValue===a.value}],onClick:e=>r.$emit("update:modelValue",a.value)},c(a.label),11,["onClick"])))),128))])]))));Q.render=te,Q.__scopeId="data-v-6eed1ab2";const ae={name:"VProgress",props:{percent:{type:Number,default:0},percentText:{type:String,default:""},pivotText:{type:String,default:"百分比"},showPercent:{type:Boolean,default:!0},showPivot:{type:Boolean,default:!0},digits:{type:Number,default:2}}},re={class:"relative mb-1"},se={class:"\n        flex item-center justify-between items-center mb-1\n        text-xs sm:text-sm text-primary-600 dark:text-primary-300\n      "},ne={key:0},le={key:1},oe={class:"overflow-hidden h-2 rounded-full bg-primary-200 dark:bg-primary-800"};ae.render=function(r,s,n,l,o,i){return e(),t("div",re,[a("div",se,[n.showPivot?(e(),t("span",ne,c(n.pivotText),1)):u("",!0),n.showPercent?(e(),t("span",le,c(n.percentText||n.percent.toFixed(n.digits)+" %"),1)):u("",!0)]),a("div",oe,[a("div",{style:{width:n.percent+"%"},class:"h-full bg-primary-600 dark:bg-primary-300"},null,4)])])};const ie={name:"UserStatistics",components:{VProgress:ae},setup(){const e=o("statisticalData");return{WEEK_LIST:E,statisticalData:e}}},ce={class:"bg-white dark:bg-dark-800 rounded-xl mb-5 p-5 shadow"},ue={class:"w-3/4 ml-8"};ie.render=function(r,s,n,l,o,c){const u=i("v-progress");return e(),t("ul",ce,[a("li",null,[a(u,{percent:l.statisticalData.doneCount/l.statisticalData.allCount*100,"pivot-text":`至少繳交一份：${l.statisticalData.doneCount}`,"percent-text":`報名數：${l.statisticalData.allCount}`},null,8,["percent","pivot-text","percent-text"])]),(e(!0),t(d,null,p(l.statisticalData.weekList,((r,s)=>(e(),t("li",{key:s},[a(u,{percent:r/l.statisticalData.doneCount*100,"pivot-text":`${l.WEEK_LIST["week"+(s+1)]}：${r}`},null,8,["percent","pivot-text"])])))),128)),a("li",ue,[a(u,{percent:l.statisticalData.week3List[0]/l.statisticalData.weekList[2]*100,"pivot-text":`LV1：${l.statisticalData.week3List[0]}`},null,8,["percent","pivot-text"]),a(u,{percent:l.statisticalData.week3List[1]/l.statisticalData.weekList[2]*100,"pivot-text":`LV2：${l.statisticalData.week3List[1]}`},null,8,["percent","pivot-text"]),a(u,{percent:l.statisticalData.week3List[2]/l.statisticalData.weekList[2]*100,"pivot-text":`恭喜完成 LV3：${l.statisticalData.week3List[2]}`},null,8,["percent","pivot-text"])])])};const de={name:"UserFilter",props:{filters:{type:Array,required:!0}},emits:["update:filters"],setup(e,{emit:t}){const{filters:a}=x(e),r=b(a.value);return g(r,(e=>{t("update:filters",e)})),{WEEK_LIST:E,valueList:r}}},pe=h();k("data-v-44dea1bd");const me={class:"flex space-x-2 mb-2 text-xs sm:text-base"};f();const ke=pe(((r,s,n,l,o,i)=>(e(),t("ul",me,[(e(!0),t(d,null,p(l.WEEK_LIST,((r,n)=>(e(),t("li",{key:n,class:"checkbox"},[w(a("input",{id:n,"onUpdate:modelValue":s[1]||(s[1]=e=>l.valueList=e),type:"checkbox",value:n},null,8,["id","value"]),[[v,l.valueList]]),a("label",{for:n},c(r),9,["for"])])))),128))]))));de.render=ke,de.__scopeId="data-v-44dea1bd";const fe={name:"VDarkModeSwitch",emits:["update:modelValue"],setup(){const e=b(j.get("darkMode",!1));return g(e,(e=>{document.querySelector("body").classList.toggle("dark",e),j.set("darkMode",e)}),{immediate:!0}),{isDark:e}}};fe.render=function(r,s,n,l,o,i){return e(),t("div",{class:"cursor-pointer select-none w-full h-full flex justify-center items-center",onClick:s[1]||(s[1]=e=>l.isDark=!l.isDark)},[a("p",null,c(l.isDark?"🌙":"🌞"),1)])};const he={name:"ScrollButtons",components:{VDarkModeSwitch:fe},props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup:()=>({clickHandler:()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})}})},xe=h();k("data-v-c843d9da");const be={class:"flex flex-col space-y-2 fixed right-5 bottom-5 z-50"},ge=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"\n        M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969\n        0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755\n        1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176\n        0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1\n        1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1\n        1 0 00.951-.69l1.519-4.674z"})],-1),we=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7l4-4m0 0l4 4m-4-4v18"})],-1);f();const ve=xe(((r,s,n,l,o,c)=>{const u=i("v-dark-mode-switch");return e(),t(L,{to:"body"},[a("div",be,[a("a",{class:"btn",title:"暗黑模式",onClick:s[1]||(s[1]=y((()=>{}),["prevent"]))},[a(u)]),a("a",{href:"",title:"我的追蹤",class:["btn",{"!bg-opacity-100":"like"===n.modelValue}],onClick:s[2]||(s[2]=y((e=>r.$emit("update:modelValue","like")),["prevent"]))},[ge],2),a("a",{title:"電梯向上",class:"btn",onClick:s[3]||(s[3]=y(((...e)=>l.clickHandler&&l.clickHandler(...e)),["prevent"]))},[we])])])}));he.render=ve,he.__scopeId="data-v-c843d9da";const ye={name:"VSearchButton",components:{},props:{modelValue:{type:String,required:!0}},emits:["update:modelValue","handler"]},Le={class:"\n    flex items-center space-x-2 p-2\n  bg-white rounded-full dark:bg-dark-800 overflow-hidden"},Ve=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1);ye.render=function(r,s,n,l,o,i){return e(),t("div",Le,[a("button",{type:"button",class:"\n        flex-shrink flex justify-center items-center w-10 h-10\n        appearance-none rounded-full hover:bg-primary-500 hover:text-white\n        focus:outline-none active:bg-primary-700\n        transition-colors duration-500",onClick:s[1]||(s[1]=e=>r.$emit("handler"))},[Ve]),a("input",V(r.$attrs,{type:"text",class:"\n        block w-full h-10 px-3 tracking-wider rounded-r-full\n        appearance-none placeholder-gray-400 bg-white\n        text-base sm:text-2l md:text-lg\n        focus:outline-none focus:bg-gray-50 focus:placeholder-gray-100\n        dark:bg-dark-800 dark:focus:bg-dark-900\n      ",onInput:s[2]||(s[2]=e=>r.$emit("update:modelValue",e.target.value)),onKeyup:s[3]||(s[3]=U((e=>r.$emit("handler")),["enter"]))}),null,16)])};const Ue={name:"VLoading",props:{modelValue:{type:Boolean,required:!0},text:{type:String,default:""}}},Se={key:0,class:"\n      fixed top-0 left-0 w-full h-full\n      flex justify-center items-center bg-white dark:bg-dark-800 opacity-75 z-50\n    "},De=a("svg",{class:"animate-spin h-32 w-32 text-primary-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2\n            5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\n          "})],-1);Ue.render=function(a,r,s,n,l,o){return e(),t(L,{to:"body"},[s.modelValue?(e(),t("div",Se,[De])):u("",!0)])};function Ce(e){const t=j.get("likeList",[]);e.forEach(((e,a)=>{let r=0;for(let t=1;t<=3;t+=1)e[`week${t}Url`]&&(r+=1);if(e.doneCount=r,e.doneCount<3)e.rank=r;else switch(e.week3){case"LV1":e.rank=3;break;case"LV2":e.rank=4;break;case"LV3":e.rank=5;break;default:e.rank=3}e.id=a,t.includes(e.id)?e.isLiked=!0:e.isLiked=!1,e.time=function(e){const t=e.split(" "),a=t[0].split("/"),r=t[2].split(":"),s=t[1],n={year:Number(a[0]),month:Number(a[1])-1,date:Number(a[2]),hours:"上午"===s?Number(r[0]):Number(r[0])+12,minutes:Number(r[1]),seconds:Number(r[2])};return new Date(n.year,n.month,n.date,n.hours,n.minutes,n.seconds).getTime()}(e.timestamp)}))}const $e={name:"App",components:{VLoading:Ue,TheHeader:B,TheFooter:W,UserList:q,UserItem:P,UserTabs:Q,UserFilter:de,UserStatistics:ie,ScrollButtons:he,VSearchButton:ye},setup(){const e=b(!1),t=S({all:[],none:[],done:[],filterDone:[],search:[],like:[]}),a=S({allCount:0,doneCount:0,weekList:[0,0,0],doneList:[0,0,0,0],week3List:[0,0,0]});C("statisticalData",a),D((async()=>{e.value=!0,await async function(e){const t=await fetch("https://raw.githubusercontent.com/hexschool/live-bootstrap5-21-api/master/data.json"),a=await t.json();e.all=a,Ce(e.all),e.none=e.all.filter((e=>0===e.doneCount)),e.done=e.all.filter((e=>0!==e.doneCount)),e.done.sort(((e,t)=>t.time-e.time)),e.none.sort(((e,t)=>t.time-e.time)),e.filterDone=e.done}(t),function(e,t){e.allCount=t.all.length,e.doneCount=t.done.length;const{weekList:a,doneList:r,week3List:s}=e;t.all.forEach((e=>{if(a.forEach(((t,r)=>{e[`week${r+1}Url`]&&(a[r]+=1)})),e.week3Url)switch(e.week3){case"LV1":s[0]+=1;break;case"LV2":s[1]+=1;break;case"LV3":s[2]+=1;break;default:s[0]+=1}r[e.doneCount]+=1}))}(a,t),e.value=!1}));const r=b([]);g(r,(a=>{if(e.value=!0,0===a.length)t.filterDone=t.done;else{const e=t.done.filter((e=>{let t=!0;return a.forEach((a=>{e[`${a}Url`]||(t=!1)})),t})).sort(((e,t)=>e.rank===t.rank?e.time-t.time:t.rank-e.rank));t.filterDone=e}window.setTimeout((()=>{e.value=!1}),500)}));const s=b("filterDone"),n=b("");return g(s,(e=>{if("like"===e){const e=j.get("likeList",[]);t.like=t.all.filter((t=>e.includes(t.id)))}})),{tabState:s,userData:t,searchWord:n,statisticalData:a,searchUser:()=>{t.search=[],t.search=function(e,t,a){if(""===a)return[];const r=new RegExp(a.trim(),"iu");return e.filter((e=>e[t].match(r)))}(t.all,"name",n.value),s.value="search"},isLoading:e,userFilters:r}}},Te={class:"vld-parent"},_e={class:"py-5"},Ee={class:"container px-2 sm:px-4"},Ie={class:"mb-5 min-h-screen"},je={class:"container px-2 sm:px-4"};$e.render=function(r,s,n,l,o,c){const u=i("the-header"),k=i("user-statistics"),f=i("v-search-button"),h=i("user-filter"),x=i("user-tabs"),b=i("user-item"),g=i("user-list"),v=i("the-footer"),y=i("scroll-buttons"),L=i("v-loading");return e(),t("div",Te,[a(u),a("section",_e,[a("div",Ee,[a(k),a(f,{modelValue:l.searchWord,"onUpdate:modelValue":s[1]||(s[1]=e=>l.searchWord=e),placeholder:"請輸入名字",onHandler:l.searchUser},null,8,["modelValue","onHandler"])])]),a("main",Ie,[a("div",je,[w(a(h,{filters:l.userFilters,"onUpdate:filters":s[2]||(s[2]=e=>l.userFilters=e)},null,8,["filters"]),[[$,"filterDone"===l.tabState]]),a(x,{modelValue:l.tabState,"onUpdate:modelValue":s[3]||(s[3]=e=>l.tabState=e)},null,8,["modelValue"]),a(g,null,{default:m((()=>[(e(!0),t(d,null,p(l.userData[l.tabState],(a=>(e(),t(b,{key:a.id,user:a},null,8,["user"])))),128))])),_:1})])]),a(v),a(y,{modelValue:l.tabState,"onUpdate:modelValue":s[4]||(s[4]=e=>l.tabState=e)},null,8,["modelValue"]),a(L,{modelValue:l.isLoading,"onUpdate:modelValue":s[5]||(s[5]=e=>l.isLoading=e)},null,8,["modelValue"])])};T($e).mount("#app");
